{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-wide' %}
{% endblock %}

{% block content %}

<div class="leagues-wrapper">

  <section class="leagues-section is-active" data-section="profile" id="leagues-tabpanel-profile" role="tabpanel" aria-labelledby="leagues-tab-profile" aria-hidden="false">
    <div class="league-profile-card" style="background-image: url('{{ url_for('static', filename='backgrounds/' ~ background) }}');">
      <div class="league-profile-overlay"></div>
      <div class="league-profile-body">
        <div class="league-profile-main">
          <img class="league-avatar" src="{{ url_for('static', filename='avatars/' ~ avatar) }}" alt="{{ trainer }} avatar">
          <div>
            <p class="league-kicker">Leagues Preview</p>
            <h1>{{ trainer }}'s League Profile</h1>
            <p class="league-subtitle">Your CDL scorecards, PvP standings, and limited-time event rewards will live here once the leagues rollout goes live.</p>
          </div>
        </div>
        <div class="league-profile-stats">
          <div class="league-stat">
            <span class="league-stat-label">Rank</span>
            <strong class="league-stat-value">{{ league_card.rank }}</strong>
          </div>
          <div class="league-stat">
            <span class="league-stat-label">CDL Points</span>
            <strong class="league-stat-value">{{ league_card.cdl_points }}</strong>
          </div>
          <div class="league-stat">
            <span class="league-stat-label">PvP Record</span>
            <strong class="league-stat-value">{{ league_card.pvp_record }}</strong>
          </div>
          <div class="league-stat">
            <span class="league-stat-label">Stamp Bonus</span>
            <strong class="league-stat-value">{{ league_card.stamp_bonus }}</strong>
          </div>
        </div>
        <button type="button" class="league-profile-expand" data-target="league-profile-expanded" aria-expanded="false" aria-controls="league-profile-expanded">
          Open Full Profile
        </button>
      </div>
    </div>

    <div class="league-profile-expanded" id="league-profile-expanded" aria-hidden="true" tabindex="-1">
      <div class="league-profile-expanded-card">
        <h3>Full League View</h3>
        <p>{{ league_card.season_highlight }}</p>
        <ul>
          {% for item in league_card.focus_items %}
            <li>{{ item }}</li>
          {% endfor %}
        </ul>
        <div class="league-profile-placeholder">
          Detailed stats, match history, and badge collections will appear here once the leagues modules are ready for launch.
        </div>
        <div class="roadmap-banner">
          <h3>What Happens Next?</h3>
          <div class="roadmap-steps">
            <div>
              <h4>Phase 1 - Data</h4>
              <p>Import CDL spreadsheets, sync Supabase tables, and generate your first scorecard previews.</p>
            </div>
            <div>
              <h4>Phase 2 - Live Ops</h4>
              <p>Enable meetup hosts to open or pause leagues mid-event with instant leaderboard refreshes.</p>
            </div>
            <div>
              <h4>Phase 3 - Automation</h4>
              <p>Automatically stamp passports from league placements and limited-time event milestones.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  {% for mode in league_modes %}
    {% if mode.key == "pvp" %}
      <section class="leagues-section" data-section="{{ mode.key }}" id="leagues-tabpanel-{{ mode.key }}" role="tabpanel" aria-labelledby="leagues-tab-{{ mode.key }}" aria-hidden="true" hidden>
        <div class="under-construction-banner">
          Gyms are under construction.
        </div>
        <div class="mode-panel">
          <header class="mode-header">
            <h2>{{ mode.title }}</h2>
            <p>{{ mode.summary }}</p>
          </header>

          {% if pvp_tournaments %}
            <form method="get" action="{{ url_for('leagues') }}" class="pvp-switcher">
              <label for="pvp-selector">Active tournaments</label>
              <input type="hidden" name="tab" value="pvp">
              <select id="pvp-selector" name="pvp_id" onchange="this.form.submit()">
                {% for t in pvp_tournaments %}
                  <option value="{{ t.id }}" {% if t.id == pvp_selected_id %}selected{% endif %}>
                    {{ t.name }} ({{ t.status|title }})
                  </option>
                {% endfor %}
              </select>
            </form>
          {% endif %}

          {% set tournament = pvp_selected.tournament if pvp_selected else None %}
          {% if not tournament %}
            <p>No PvP tournaments are live right now. Check back soon!</p>
          {% else %}
            <div class="pvp-header">
              <div>
                <h3>{{ tournament.name }}</h3>
                <p class="pvp-status-line">
                  Status: <strong>{{ tournament.status|replace('_', ' ')|title }}</strong>
                  {% if tournament.start_at %}
                    · Starts {{ tournament.start_at.strftime('%d %b %Y %H:%M') }} UTC
                  {% endif %}
                </p>
                {% if tournament.location_text %}
                  <p class="pvp-location">{{ tournament.location_text }}</p>
                {% endif %}
                {% if tournament.description %}
                  <p class="pvp-description">{{ tournament.description }}</p>
                {% endif %}
              </div>
              <div class="pvp-actions">
                {% if pvp_registration %}
                  <span class="badge badge--success">Registered</span>
                  <a class="btn btn-secondary" href="{{ url_for('leagues_pvp_team', tournament_id=tournament.id) }}">Edit Team</a>
                {% elif tournament.status == "REGISTRATION" %}
                  <a class="btn" href="{{ url_for('leagues_pvp_join', tournament_id=tournament.id) }}">Join Tournament</a>
                {% else %}
                  <span class="badge">Registration Closed</span>
                {% endif %}
              </div>
            </div>

            <div class="mode-grid">
              <div class="mode-card">
                <h3>Rules Snapshot</h3>
                {% if pvp_selected.rules %}
                  <ul>
                    {% for rule in pvp_selected.rules %}
                      <li>
                        {% if rule.title %}
                          <strong>{{ rule.title }}:</strong>
                        {% endif %}
                        {{ rule.body or "" }}
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <p>Rules for this tournament will appear here once the admin team posts them.</p>
                {% endif %}
              </div>
              <div class="mode-card">
                <h3>Prizes</h3>
                {% if pvp_selected.prizes %}
                  <ul>
                    {% for prize in pvp_selected.prizes %}
                      <li><strong>Place {{ prize.placement }}:</strong> {{ prize.description }}</li>
                    {% endfor %}
                  </ul>
                {% elif tournament.prize_summary %}
                  <p>{{ tournament.prize_summary }}</p>
                {% else %}
                  <p>Prizes are being finalised. Keep training!</p>
                {% endif %}
              </div>
            </div>

            <div class="pvp-layout">
              <section class="mode-card">
                <h3>Registered Trainers</h3>
                {% if pvp_selected.registrations %}
                  <ul class="pvp-roster">
                    {% for reg in pvp_selected.registrations %}
                      <li>
                        <div>
                          <strong>{{ reg.notes or "Trainer" }}</strong>
                          {% if reg.status %}
                            <span class="badge badge--light">{{ reg.status|title }}</span>
                          {% endif %}
                        </div>
                        {% if reg.teams %}
                          <span class="team-count">{{ reg.teams|length }} Pokémon locked</span>
                        {% endif %}
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <p>No trainers have registered yet. Be the first!</p>
                {% endif %}
              </section>

              <section class="mode-card">
                <h3>Bracket Overview</h3>
                {% if pvp_selected.matches %}
                  <ul class="pvp-bracket">
                    {% for match in pvp_selected.matches %}
                      <li>
                        Round {{ match.round_no }} · {{ match.status|replace('_', ' ')|title }}
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <p>The bracket will appear here once the tournament begins.</p>
                {% endif %}
              </section>

              <section class="mode-card">
                <h3>Leaderboard</h3>
                {% if pvp_selected.leaderboard %}
                  <ol class="pvp-leaderboard">
                    {% for row in pvp_selected.leaderboard %}
                      <li>
                        <span>{{ row.rank or loop.index }}.</span>
                        <span>{{ row.registration_id[:8] }} · {{ row.points }} pts</span>
                      </li>
                    {% endfor %}
                  </ol>
                {% else %}
                  <p>Leaderboard standings appear once matches have been reported.</p>
                {% endif %}
              </section>
            </div>
          {% endif %}

          {% if pvp_archive %}
            <div class="mode-card mode-card--wide">
              <h3>Previous Tournaments</h3>
              <ul class="pvp-archive">
                {% for history in pvp_archive %}
                  <li>
                    <strong>{{ history.name }}</strong>
                    <span>{{ history.bracket_type|replace('_', ' ')|title }}</span>
                    <span>Status: {{ history.status|title }}</span>
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}

          <div class="mode-card mode-card--wide">
            <h3>Season Playbook</h3>
            <p>We are building tools to open a PvP league alongside meetups, complete with cup rules, pairings, and live scoring. Expect a Hall of Fame board once we have a few seasons under our belt.</p>
            <ul class="playbook-highlights">
              <li>Season timeline with rounds and match checkpoints.</li>
              <li>Live brackets that refresh as scores are entered on-site.</li>
              <li>Rulesets and featured Pokemon surfaced for every cup.</li>
            </ul>
          </div>
        </div>
      </section>
    {% else %}
      <section class="leagues-section" data-section="{{ mode.key }}" id="leagues-tabpanel-{{ mode.key }}" role="tabpanel" aria-labelledby="leagues-tab-{{ mode.key }}" aria-hidden="true" hidden>
        <div class="under-construction-banner">
          Gyms are under construction.
        </div>
        <div class="mode-panel">
          <header class="mode-header">
            <h2>{{ mode.title }}</h2>
            <p>{{ mode.summary }}</p>
          </header>

          <div class="mode-grid">
            <div class="mode-card">
              <h3>What To Expect</h3>
              <ul>
                {% for feature in mode.features %}
                  <li>{{ feature }}</li>
                {% endfor %}
              </ul>
            </div>
            <div class="mode-card">
              <h3>Future Goals</h3>
              <ul>
                {% for feature in mode.future %}
                  <li>{{ feature }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>

          {% if mode.key == "cdl" %}
            <div class="mode-card mode-card--wide">
              <h3>CDL Scorecard</h3>
              <p>Your CDL card will show ranking, match history, and personal highlights at a glance. Historic cups will move into an archive so you never lose track of past performances.</p>
              <div class="placeholder-scorecard">
                <div>
                  <span class="label">Current Rank</span>
                  <span class="value">TBD</span>
                </div>
                <div>
                  <span class="label">Season Record</span>
                  <span class="value">0W - 0L</span>
                </div>
                <div>
                  <span class="label">Next Event</span>
                  <span class="value">Launching soon</span>
                </div>
              </div>
            </div>
          {% elif mode.key == "limited" %}
            <div class="mode-card mode-card--wide">
              <h3>Limited-Time Events</h3>
              {% if live_event_settings.active %}
                <p>Welcome to the <strong>{{ live_event_settings.theme }}</strong> hub! Look out for themed visuals, limited quests, and exclusive stamp bonuses.</p>
              {% else %}
                <p>{{ live_event_settings.inactive_copy }}</p>
              {% endif %}
              <div class="activity-grid">
                {% for activity in live_event_settings.activities %}
                  <section class="activity-card">
                    <h4>{{ activity.title }}</h4>
                    <ul>
                      {% for detail in activity.details %}
                        <li>{{ detail }}</li>
                      {% endfor %}
                    </ul>
                  </section>
                {% endfor %}
                <section class="activity-card">
                  <h4>More Event Ideas</h4>
                  <ul>
                    <li>City scavenger hunts with snap-and-upload proof.</li>
                    <li>Story-driven missions with NFC or QR check-ins.</li>
                    <li>Bonus stamps for streaks or challenge completions.</li>
                  </ul>
                </section>
              </div>
            </div>
          {% endif %}
        </div>
      </section>
    {% endif %}
  {% endfor %}

</div>

<nav class="leagues-footer-nav" role="tablist" aria-label="Leagues navigation">
  <button type="button" class="nav-button is-active" data-section-target="profile" id="leagues-tab-profile" role="tab" aria-controls="leagues-tabpanel-profile" aria-selected="true" tabindex="0">
    Leagues Profile
  </button>
  <button type="button" class="nav-button" data-section-target="cdl" id="leagues-tab-cdl" role="tab" aria-controls="leagues-tabpanel-cdl" aria-selected="false" tabindex="-1">
    CDL
  </button>
  <button type="button" class="nav-button" data-section-target="pvp" id="leagues-tab-pvp" role="tab" aria-controls="leagues-tabpanel-pvp" aria-selected="false" tabindex="-1">
    PvP
  </button>
  <button type="button" class="nav-button" data-section-target="limited" id="leagues-tab-limited" role="tab" aria-controls="leagues-tabpanel-limited" aria-selected="false" tabindex="-1">
    Limited Time
  </button>
</nav>

<script>
(function () {
  const navButtons = document.querySelectorAll(".leagues-footer-nav button");
  const sections = document.querySelectorAll(".leagues-section");
  const expandButton = document.querySelector(".league-profile-expand");
  const expandedPanel = document.getElementById("league-profile-expanded");

  const showSection = (target) => {
    sections.forEach((section) => {
      const isMatch = section.dataset.section === target;
      section.classList.toggle("is-active", isMatch);
      section.setAttribute("aria-hidden", String(!isMatch));
      if (isMatch) {
        section.removeAttribute("hidden");
      } else {
        section.setAttribute("hidden", "hidden");
      }
    });
    navButtons.forEach((button) => {
      const isMatch = button.dataset.sectionTarget === target;
      button.classList.toggle("is-active", isMatch);
      button.setAttribute("aria-selected", String(isMatch));
      button.setAttribute("tabindex", isMatch ? "0" : "-1");
    });
    if (target !== "profile" && expandedPanel && expandButton) {
      expandedPanel.classList.remove("is-open");
      expandedPanel.setAttribute("aria-hidden", "true");
      expandButton.setAttribute("aria-expanded", "false");
      expandButton.textContent = "Open Full Profile";
    }
  };

  navButtons.forEach((button) => {
    button.addEventListener("click", () => {
      showSection(button.dataset.sectionTarget);
      if (button.dataset.sectionTarget === "profile") {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    });
  });

  if (expandButton && expandedPanel) {
    expandButton.addEventListener("click", () => {
      const isOpen = expandedPanel.classList.toggle("is-open");
      expandedPanel.setAttribute("aria-hidden", String(!isOpen));
      expandButton.setAttribute("aria-expanded", String(isOpen));
      expandButton.textContent = isOpen ? "Close Full Profile" : "Open Full Profile";
    });
  }

  showSection("profile");
})();
</script>

<style>
.leagues-wrapper {
  display:flex;
  flex-direction:column;
  gap:18px;
  margin-bottom:72px;
}
.leagues-section {
  display:none;
}
.leagues-section.is-active {
  display:block;
}
.league-profile-card {
  position:relative;
  background-size:cover;
  background-position:center;
  border-radius:16px;
  overflow:hidden;
  color:#fff;
  box-shadow:0 14px 30px rgba(15,23,42,0.28);
}
.league-profile-overlay {
  position:absolute;
  inset:0;
  background:linear-gradient(135deg, rgba(9,14,35,0.78) 0%, rgba(9,14,35,0.35) 100%);
  pointer-events:none;
}
.league-profile-body {
  position:relative;
  z-index:1;
  padding:22px;
  display:flex;
  flex-direction:column;
  gap:18px;
}
.league-profile-main {
  display:flex;
  align-items:flex-start;
  gap:16px;
}
.league-avatar {
  width:72px;
  height:72px;
  border-radius:50%;
  border:3px solid rgba(255,255,255,0.85);
  box-shadow:0 6px 16px rgba(15,23,42,0.45);
  object-fit:cover;
}
.league-kicker {
  margin:0;
  text-transform:uppercase;
  letter-spacing:0.08em;
  font-size:0.75em;
  color:#60a5fa;
  font-weight:600;
}
.league-profile-body h1 {
  margin:4px 0 8px;
}
.league-subtitle {
  margin:0;
  max-width:520px;
  color:rgba(255,255,255,0.88);
}
.league-profile-stats {
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:16px;
}
.league-stat {
  background:rgba(15,23,42,0.55);
  border-radius:14px;
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:4px;
  box-shadow:0 8px 20px rgba(15,23,42,0.25);
}
.league-stat-label {
  font-size:0.78em;
  letter-spacing:0.05em;
  text-transform:uppercase;
  color:rgba(255,255,255,0.7);
}
.league-stat-value {
  font-size:1.05em;
  font-weight:700;
}
.league-profile-expand {
  align-self:flex-start;
  padding:10px 18px;
  border-radius:999px;
  border:none;
  background:#fde68a;
  color:#1f2937;
  font-weight:600;
  cursor:pointer;
  transition:transform 0.15s ease, box-shadow 0.15s ease;
  box-shadow:0 10px 20px rgba(252,211,77,0.35);
}
.league-profile-expand:hover {
  transform:translateY(-1px);
  box-shadow:0 12px 24px rgba(252,211,77,0.45);
}
.league-profile-expanded {
  display:none;
  margin-top:16px;
  max-height:360px;
  overflow-y:auto;
}
.league-profile-expanded.is-open {
  display:block;
}
.league-profile-expanded-card {
  background:#fff;
  border-radius:16px;
  padding:22px;
  box-shadow:0 12px 28px rgba(15,23,42,0.12);
  color:#1f2937;
}
.league-profile-expanded-card h3 {
  margin-top:0;
}
.league-profile-expanded-card ul {
  margin:12px 0 16px;
  padding-left:18px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.league-profile-placeholder {
  border:1px dashed #cbd5f5;
  border-radius:12px;
  padding:16px;
  background:#f8fafc;
  color:#475569;
  font-size:0.95em;
  margin-bottom:18px;
}
.mode-panel {
  background:#fff;
  border-radius:16px;
  padding:22px;
  box-shadow:0 12px 28px rgba(15,23,42,0.12);
}
.under-construction-banner {
  background:#fef08a;
  color:#1f2937;
  border-radius:12px;
  padding:12px 16px;
  margin-bottom:16px;
  font-weight:600;
  text-align:center;
  border:1px solid #facc15;
  box-shadow:0 8px 16px rgba(250,204,21,0.22);
}
.mode-header h2 {
  margin:0 0 6px;
}
.mode-grid {
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:16px;
  margin-top:18px;
}
.mode-card {
  background:#f8fafc;
  border-radius:14px;
  padding:18px;
  box-shadow:inset 0 0 0 1px rgba(148,163,184,0.25);
}
.mode-card h3 {
  margin-top:0;
}
.mode-card ul {
  margin:12px 0 0;
  padding-left:18px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.mode-card--wide {
  margin-top:18px;
}
.pvp-switcher {
  display:flex;
  align-items:center;
  gap:12px;
  margin-bottom:16px;
}
.pvp-switcher select {
  padding:8px 12px;
  border-radius:10px;
  border:1px solid #d0d7e6;
  background:#fff;
  font-weight:600;
}
.pvp-header {
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:20px;
  margin-bottom:18px;
}
.pvp-status-line {
  margin:6px 0;
  color:#475569;
  font-size:0.9em;
}
.pvp-location {
  margin:4px 0;
  font-weight:600;
  color:#1f2937;
}
.pvp-description {
  margin:6px 0 0;
  color:#475569;
}
.pvp-actions {
  display:flex;
  gap:10px;
  align-items:center;
}
.btn-secondary {
  background:#1f2937;
  color:#fff;
}
.btn-small {
  padding:6px 10px;
  border-radius:10px;
  border:none;
  background:#3a8dde;
  color:#fff;
  font-size:0.8em;
  cursor:pointer;
}
.badge {
  display:inline-flex;
  align-items:center;
  padding:6px 10px;
  border-radius:999px;
  background:#e2e8f0;
  color:#1f2937;
  font-size:0.75em;
  font-weight:600;
}
.badge--success {
  background:#22c55e;
  color:#fff;
}
.badge--light {
  background:#cbd5f5;
  color:#1f2937;
}
.pvp-layout {
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:16px;
  margin-top:18px;
}
.pvp-roster {
  list-style:none;
  padding:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.pvp-roster li {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 12px;
  border-radius:12px;
  background:#fff;
  box-shadow:0 6px 14px rgba(15,23,42,0.08);
}
.team-count {
  font-size:0.8em;
  color:#3a8dde;
  font-weight:600;
}
.pvp-bracket,
.pvp-leaderboard,
.pvp-archive {
  list-style:none;
  padding:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.pvp-archive li {
  display:flex;
  flex-direction:column;
  gap:2px;
  padding:10px 12px;
  border-radius:12px;
  background:#fff;
  box-shadow:0 6px 14px rgba(15,23,42,0.08);
}
.placeholder-scorecard {
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:12px;
}
.placeholder-scorecard div {
  background:#fff;
  border-radius:12px;
  padding:12px;
  box-shadow:0 8px 16px rgba(15,23,42,0.1);
  text-align:center;
}
.placeholder-scorecard .label {
  display:block;
  font-size:0.8em;
  color:#64748b;
}
.placeholder-scorecard .value {
  display:block;
  margin-top:4px;
  font-weight:700;
  font-size:1em;
  color:#1f2937;
}
.playbook-highlights {
  margin-top:12px;
  padding-left:18px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.activity-grid {
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:16px;
}
.activity-card {
  background:#fff;
  border-radius:12px;
  padding:16px;
  box-shadow:0 10px 18px rgba(15,23,42,0.08);
}
.activity-card h4 {
  margin:0 0 8px;
}
.activity-card ul {
  margin:0;
  padding-left:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.roadmap-banner {
  background:#f8fafc;
  border-radius:14px;
  padding:18px;
  box-shadow:inset 0 0 0 1px rgba(148,163,184,0.25);
}
.roadmap-banner h3 {
  margin:0 0 10px;
  color:#3a8dde;
}
.roadmap-steps {
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:16px;
}
.roadmap-steps div {
  background:#fff;
  border-radius:12px;
  padding:16px;
  box-shadow:0 8px 16px rgba(15,23,42,0.08);
}
.roadmap-steps h4 {
  margin:0 0 6px;
  color:#3a8dde;
}
.leagues-footer-nav {
  position:sticky;
  bottom:0;
  display:flex;
  gap:10px;
  background:rgba(255,255,255,0.95);
  padding:12px 16px;
  border-radius:16px 16px 0 0;
  border:1px solid #dbe0ea;
  box-shadow:0 -8px 20px rgba(15,23,42,0.12);
  backdrop-filter:blur(12px);
  z-index:20;
}
.nav-button {
  flex:1;
  padding:10px 12px;
  border-radius:12px;
  border:none;
  background:#e2e8f0;
  color:#1f2937;
  font-weight:600;
  cursor:pointer;
  transition:all 0.18s ease;
}
.nav-button.is-active {
  background:#3a8dde;
  color:#fff;
  box-shadow:0 10px 20px rgba(58,141,222,0.28);
}
.nav-button:focus-visible {
  outline:3px solid #93c5fd;
  outline-offset:2px;
}

@media (max-width: 960px) {
  .league-profile-stats {
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
  .mode-grid,
  .placeholder-scorecard,
  .activity-grid,
  .roadmap-steps,
  .pvp-layout {
    grid-template-columns:repeat(1,minmax(0,1fr));
  }
}

@media (max-width: 640px) {
  .league-profile-body {
    padding:18px;
  }
  .league-profile-main {
    flex-direction:column;
    align-items:flex-start;
  }
  .league-profile-stats {
    grid-template-columns:repeat(1,minmax(0,1fr));
  }
  .pvp-header {
    flex-direction:column;
  }
  .pvp-actions {
    width:100%;
    justify-content:flex-start;
    flex-wrap:wrap;
  }
  .pvp-switcher {
    flex-direction:column;
    align-items:flex-start;
  }
  .nav-button {
    font-size:0.85em;
  }
}
</style>

{% endblock %}
