{% extends "base.html" %}
{% block content %}

<!-- Header -->
<div class="admin-header">
  <h1>ðŸ‘¥ Trainer Manager</h1>
  <p>View and manage all registered trainers.</p>
</div>

<!-- Live Search Bar -->
<div class="search-bar">
  <input type="text" id="trainerSearch" placeholder="Search by Trainer or Campfire Usernameâ€¦">
</div>

<!-- All Trainers -->
<div class="trainer-grid" id="trainerGrid">
  {% for t in all_trainers %}
    <a href="{{ url_for('admin_trainer_detail', username=t.trainer_username) }}" 
       class="trainer-card" 
       data-username="{{ t.trainer_username | lower }}" 
       data-campfire="{{ (t.campfire_username or '') | lower }}">
      <img src="{{ url_for('static', filename='avatars/' ~ t.avatar_icon) }}"
           alt="Avatar" class="avatar">
      <h4>{{ t.trainer_username }}</h4>
      <p>{{ t.account_type }}</p>
      <p>Stamps: {{ t.stamps }}</p>
    </a>
  {% endfor %}
</div>

<div style="margin-top:20px; text-align:center;">
  <a href="{{ url_for('admin_dashboard') }}" class="btn">â¬… Back to Admin Dashboard</a>
</div>

<style>
.admin-header {
  text-align:center;
  margin-bottom:10px;
}
.admin-header h1 { margin:0; }
.admin-header p { color:#666; font-size:0.95em; }

/* Search Bar */
.search-bar {
  display:flex;
  justify-content:center;
  margin:15px 0 25px;
}
.search-bar input {
  width:100%;
  max-width:420px;
  padding:8px 12px;
  border:1px solid #ccc;
  border-radius:6px;
  font-size:0.9em;
}

/* Trainer Grid */
.trainer-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
  gap:15px;
}
.trainer-card {
  background:#fff;
  border-radius:10px;
  padding:15px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  text-align:center;
  text-decoration:none;
  color:inherit;
  transition:transform 0.2s, box-shadow 0.2s;
}
.trainer-card:hover {
  transform: translateY(-3px);
  box-shadow:0 4px 10px rgba(0,0,0,0.15);
}
.trainer-card img.avatar {
  width:64px;
  height:64px;
  border-radius:50%;
  border:2px solid #3a8dde;
  margin-bottom:10px;
}
.trainer-card h4 {
  margin:0;
  font-size:1.1em;
  color:#3a8dde;
}
.trainer-card p {
  margin:4px 0;
  font-size:0.85em;
  color:#444;
}

.btn {
  display:inline-block;
  padding:8px 16px;
  background:#3a8dde;
  color:#fff;
  border-radius:6px;
  text-decoration:none;
  font-weight:600;
}
</style>

<script>
// ðŸ”Ž Live filter for trainers
document.addEventListener("DOMContentLoaded", () => {
  const searchInput = document.getElementById("trainerSearch");
  const cards = document.querySelectorAll("#trainerGrid .trainer-card");

  searchInput.addEventListener("input", () => {
    const query = searchInput.value.toLowerCase();
    cards.forEach(card => {
      const username = card.dataset.username || "";
      const campfire = card.dataset.campfire || "";
      if (username.includes(query) || campfire.includes(query)) {
        card.style.display = "block";
      } else {
        card.style.display = "none";
      }
    });
  });
});
</script>

{% endblock %}