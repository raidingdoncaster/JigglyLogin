{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-wide' %}
{% endblock %}

{% block content %}

<!-- Header -->
<div class="admin-header">
  <h1>üëë Admin Dashboard</h1>
  <p>Manage Catalog, Meet-ups, Redemptions, and System Settings.</p>
</div>

<!-- Quick Stats -->
<div class="admin-stats">
  <div class="stat-card">
    <h3>üì¶</h3>
    <p>Active Catalog Items</p>
    <span>{{ active_catalog_items or 0 }}</span>
  </div>
  <div class="stat-card">
    <h3>üéÅ</h3>
    <p>Pending Redemptions</p>
    <span>{{ pending_redemptions or 0 }}</span>
  </div>
  <div class="stat-card">
    <h3>üë•</h3>
    <p>Registered Trainers</p>
    <span>{{ registered_trainers or 0 }}</span>
  </div>
</div>

<!-- Admin Apps -->
<div class="explore">
  <h3>üõ†Ô∏è Management Panels</h3>
  <div class="explore-grid">
    <a class="explore-card" href="{{ url_for('admin_trainers') }}">
      <img src="{{ url_for('static', filename='icons/admin/trainer-manager.png') }}" alt="Trainer Manager">
      <span>Trainer Manager</span>
    </a>
    <a class="explore-card" href="{{ url_for('admin_classic_stamps') }}">
      <img src="{{ url_for('static', filename='icons/admin/notification-center.png') }}" alt="Classic Stamps">
      <span>Classic Stamps</span>
    </a>
    <a class="explore-card" href="{{ url_for('admin_stats') }}">
      <img src="{{ url_for('static', filename='icons/admin/rdab-stats.png') }}" alt="RDAB Stats">
      <span>RDAB Stats</span>
    </a>
    {% if geocache_quest_available %}
      <a class="explore-card" href="{{ url_for('geocache.quest_shell') }}" target="_blank" rel="noopener">
        <img src="{{ url_for('static', filename='icons/admin/catalog-manager.png') }}" alt="Geocache Quest">
        <span>Run Geocache Quest</span>
      </a>
    {% else %}
      <div class="explore-card is-disabled" title="Geocache quest tooling is not deployed in this build.">
        <img src="{{ url_for('static', filename='icons/admin/catalog-manager.png') }}" alt="Geocache Quest">
        <span>Run Geocache Quest</span>
        <small>Not available</small>
      </div>
    {% endif %}
    {% if show_leagues_app %}
      <a class="explore-card" href="{{ url_for('admin_leagues') }}">
        <img src="{{ url_for('static', filename='icons/leagues-app.png') }}" alt="Leagues Hub">
        <span>Leagues Hub</span>
      </a>
    {% endif %}
    <a class="explore-card" href="{{ url_for('admin_notifications') }}">
      <img src="{{ url_for('static', filename='icons/admin/notification-center.png') }}" alt="Notifications Center">
      <span>Notifications Center</span>
    </a>
    <a class="explore-card" href="{{ url_for('admin_catalog') }}">
      <img src="{{ url_for('static', filename='icons/admin/catalog-manager.png') }}" alt="Catalog Manager">
      <span>Catalog Manager</span>
    </a>
    {% if geocache_story_available %}
      <a class="explore-card" href="{{ url_for('admin_geocache_story') }}">
        <img src="{{ url_for('static', filename='icons/admin/catalog-manager.png') }}" alt="Geocache Story">
        <span>Story & Assets</span>
      </a>
    {% else %}
      <div class="explore-card is-disabled" title="Story editor unlocks when the Geocache admin routes are deployed.">
        <img src="{{ url_for('static', filename='icons/admin/catalog-manager.png') }}" alt="Geocache Story">
        <span>Story & Assets</span>
        <small>Not available</small>
      </div>
    {% endif %}
    <a class="explore-card" href="{{ url_for('admin_meetups') }}">
      <img src="{{ url_for('static', filename='icons/admin/meetups-manager.png') }}" alt="Meetup Manager">
      <span>Meetups Manager</span>
    </a>
    <a class="explore-card" href="{{ url_for('admin_calendar_events') }}">
      <img src="{{ url_for('static', filename='icons/admin/notification-center.png') }}" alt="Calendar Events">
      <span>Calendar Events</span>
    </a>
    <a class="explore-card" href="{{ url_for('admin_redemptions') }}">
      <img src="{{ url_for('static', filename='icons/admin/redemptions-manager.png') }}" alt="Redemptions Manager">
      <span>Redemptions Manager</span>
    </a>
  </div>
</div>

<div class="testing-banner">
  <div>
    <p class="testing-banner__eyebrow">Prototype Lab</p>
    <h3>Testing Grounds</h3>
    <p>Try experimental features like the Advent Calendar before trainers see them.</p>
  </div>
  <a class="testing-banner__cta" href="{{ url_for('admin_testing_grounds') }}">Enter Testing Grounds</a>
</div>

<style>
.admin-header { text-align:center; margin-bottom:20px; }
.admin-header h1 { margin:0; }
.admin-header p { color:#666; font-size:0.95em; }

.admin-stats {
  display:flex;
  gap:16px;
  margin-bottom:24px;
  flex-wrap:nowrap;
  overflow-x:auto;
  scrollbar-width:none;
}
.admin-stats::-webkit-scrollbar { display:none; }
.stat-card {
  background:#fff;
  border-radius:14px;
  padding:18px;
  text-align:center;
  box-shadow:0 8px 20px rgba(15,23,42,0.12);
  flex:1 1 200px;
  min-width:200px;
}
.stat-card h3 { margin:0; font-size:1.5em; }
.stat-card p { margin:6px 0; font-size:0.9em; color:#3a8dde; }
.stat-card span { font-size:1.3em; font-weight:700; }

.explore-grid {
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:14px;
  margin-top:18px;
}
.explore-card {
  background:transparent;
  border-radius:16px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:12px 0;
  text-decoration:none;
  color:#333;
  transition:transform .18s ease;
}
.explore-card:hover { transform:translateY(-3px); }
.explore-card img { width:clamp(56px,15vw,80px); height:clamp(56px,15vw,80px); filter:drop-shadow(0 12px 20px rgba(15,23,42,0.18)); }
.explore-card span {
  margin-top:8px;
  font-size:0.9em;
  font-weight:600;
  text-shadow:0 6px 12px rgba(15,23,42,0.1);
}
.explore-card.is-disabled {
  opacity:0.45;
  pointer-events:none;
  filter:grayscale(0.2);
}
.explore-card.is-disabled small {
  display:block;
  margin-top:4px;
  font-size:0.75em;
  color:#667085;
}
.testing-banner {
  margin-top:32px;
  padding:20px 24px;
  border-radius:18px;
  background:linear-gradient(135deg,#1f1c2c,#928dab);
  color:#fff;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:16px;
  flex-wrap:wrap;
}
.testing-banner__eyebrow {
  text-transform:uppercase;
  font-size:0.75rem;
  letter-spacing:0.2em;
  margin:0 0 6px 0;
}
.testing-banner h3 {
  margin:0 0 4px 0;
}
.testing-banner p {
  margin:0;
  max-width:520px;
}
.testing-banner__cta {
  background:#fff;
  color:#1f1c2c;
  padding:12px 24px;
  border-radius:999px;
  text-decoration:none;
  font-weight:600;
  white-space:nowrap;
}
.testing-banner__cta:hover {
  background:rgba(255,255,255,0.85);
}
@media(max-width:720px){
  .admin-header{ text-align:left; }
  .testing-banner {
    flex-direction:column;
    align-items:flex-start;
  }
  .testing-banner__cta {
    width:100%;
    text-align:center;
  }
}
</style>

{% endblock %}
