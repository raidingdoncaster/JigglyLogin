{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-fluid' %}
{% endblock %}

{% block content %}
<div class="about-shell">
  <h1 class="about-heading">About RDAB</h1>

  <div class="about-frame">
    <iframe
      src="{{ about_embed_url }}#about"
      title="About RDAB overview"
      loading="lazy"
      allow="fullscreen"
      referrerpolicy="no-referrer"
    ></iframe>
  </div>

  <p class="about-fallback">
    {% if not has_cached_embed %}
      Loading the RDAB overview… If it doesn’t appear, 
      <a href="{{ about_source_url }}" target="_blank" rel="noopener">open the full site in a new tab</a>.
    {% else %}
      If the embed doesn’t load, 
      <a href="{{ about_source_url }}" target="_blank" rel="noopener">open the full site in a new tab</a>.
    {% endif %}
  </p>
</div>

<button type="button" class="about-scroll-top" id="about-scroll-top" aria-label="Back to top">
  ⬆ Back to top
</button>

<style>
.about-shell{
  display:flex;
  flex-direction:column;
  gap:16px;
  padding:0 clamp(12px,4vw,24px) 24px;
  color:#0f172a;
}
.about-heading{margin:0;font-size:1.6rem;text-align:left;}
.about-frame{
  background:#fff;
  border-radius:22px;
  box-shadow:0 16px 36px rgba(15,23,42,0.18);
  overflow:hidden;
}
.about-frame iframe{
  display:block;
  width:100%;
  height:min(88vh,920px);
  min-height:520px;
  border:0;
}
.about-fallback{
  margin:10px 0 0;
  font-size:0.9rem;
  color:#475569;
}
.about-fallback a{
  color:#1d4ed8;
  font-weight:600;
}
.about-scroll-top{
  position:fixed;
  right:20px;
  bottom:24px;
  padding:10px 16px;
  border-radius:999px;
  border:none;
  background:#38bdf8;
  color:#0f172a;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(56,189,248,0.32);
  opacity:0;
  transform:translateY(8px);
  transition:opacity .2s ease, transform .2s ease;
  pointer-events:none;
}
.about-scroll-top.is-visible{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
@media(max-width:600px){
  .about-shell{
    padding:0 14px 20px;
  }
  .about-frame iframe{
    height:min(90vh,800px);
    min-height:480px;
  }
  .about-fallback{
    font-size:0.85rem;
  }
}
</style>

<script>
(function(){
  const scrollBtn = document.getElementById("about-scroll-top");
  if (!scrollBtn) {
    return;
  }

  scrollBtn.addEventListener("click", function(){
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  window.addEventListener("scroll", function(){
    if (window.scrollY > 320) {
      scrollBtn.classList.add("is-visible");
    } else {
      scrollBtn.classList.remove("is-visible");
    }
  });
})();
</script>
{% endblock %}
