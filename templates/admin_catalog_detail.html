{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-wide' %}
{% endblock %}

{% block content %}

<a href="{{ url_for('admin_catalog') }}" class="back-link">‚¨Ö Back to Catalog Manager</a>

<div class="card">
  <h2>‚úèÔ∏è Edit {{ item.name }}</h2>
  <form action="{{ url_for('admin_catalog_update', item_id=item.id) }}" method="post" enctype="multipart/form-data" class="grid two">
    <label>Name <input type="text" name="name" value="{{ item.name }}" required></label>
    <label>Cost <input type="number" name="cost_stamps" min="0" value="{{ item.cost_stamps }}"></label>
    <label class="colspan">Description <textarea name="description" rows="3">{{ item.description }}</textarea></label>
    <label>Stock <input type="number" name="stock" min="0" value="{{ item.stock }}"></label>
    <label>Tags <input type="text" name="tags" value="{{ (item.tags or [])|join(',') }}"></label>
    <label>Image URL <input type="url" name="image_url" value="{{ item.image_url }}"></label>
    <label>Upload <input type="file" name="image_file" accept="image/*"></label>
    <label class="check"><input type="checkbox" name="active" {% if item.active %}checked{% endif %}> Online</label>
    <div class="actions colspan"><button type="submit">üíæ Save Changes</button></div>
  </form>
</div>

<form action="{{ url_for('admin_catalog_delete', item_id=item.id) }}" method="post" onsubmit="return confirm('Delete {{ item.name }}?');">
  <button class="danger">üóëÔ∏è Delete Item</button>
</form>

<style>
.card { background:#fff; border-radius:14px; padding:20px; box-shadow:0 8px 20px rgba(15,23,42,0.12); margin-bottom:18px; }
.grid.two { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; }
.grid.two .colspan { grid-column:1 / -1; }
.grid.two input, .grid.two textarea { width:100%; }
.actions { text-align:right; }
.actions button { background:#3a8dde; color:#fff; border:none; padding:10px 16px; border-radius:999px; font-weight:600; cursor:pointer; box-shadow:0 6px 16px rgba(58,141,222,0.25); }
.back-link { display:inline-flex; align-items:center; gap:6px; margin-bottom:14px; text-decoration:none; font-weight:600; color:#3a8dde; }
.danger { background:#ef4444; color:#fff; border:none; padding:10px 18px; border-radius:999px; font-weight:600; margin-top:12px; cursor:pointer; box-shadow:0 6px 18px rgba(239,68,68,0.25); }
</style>

{% endblock %}
