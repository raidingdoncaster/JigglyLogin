{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-fluid' %}
{% endblock %}

{% block content %}

<div class="landing-shell">
  <section class="hero">
    <div class="hero-glow"></div>
    <div class="hero-content">
      <span class="eyebrow">Raiding Doncaster and Beyond</span>
      <h1>Where local Trainers level up together.</h1>
      <p>
        Passport stamps, community rewards, and real-world adventures — all powered by a volunteer-led Community Ambassador team.
        Log in to track your progress and see what’s next.
      </p>
      <div class="hero-actions">
        <button type="button" class="btn-primary btn-primary--large" id="installBtn">Install App</button>
        <a class="btn-secondary btn-secondary--compact" href="{{ url_for('calendar_public') }}">View meetup calendar</a>
      </div>
    </div>
  </section>

  <div class="install-guide" id="installGuide">
    <div class="install-card">
      <button type="button" class="close-guide" id="closeInstall" aria-label="Close">×</button>
      <h2>Install RDAB App</h2>
      <div class="install-body">
        <div class="install-step install-step--ios" id="installIOS">
          <h3>iOS 16+</h3>
          <ol>
            <li>Tap the <span class="icon">⤴️</span> Share button in Safari.</li>
            <li>Scroll and choose <strong>Add to Home Screen</strong>.</li>
            <li>Confirm the name, then tap <strong>Add</strong>.</li>
          </ol>
        </div>
        <div class="install-step install-step--android" id="installAndroid">
          <h3>Android (Chrome)</h3>
          <ol>
            <li>Tap the <span class="icon">⋮</span> menu in the top right.</li>
            <li>Select <strong>Install app</strong> or <strong>Add to Home screen</strong>.</li>
            <li>Approve the prompt to save RDAB to your device.</li>
          </ol>
        </div>
      </div>
      <p class="install-note">Already installed? Open the RDAB icon on your home screen to log in.</p>
    </div>
  </div>

  <section class="about-card" id="about">
    <h2>We are Raiding Doncaster and Beyond!</h2>
    <p>
      We’re a Community Ambassador established community of Pokémon GO trainers in and around Doncaster who raid together,
      explore local parks, and help new and returning players feel at home. Safe, welcoming, and proudly local.
    </p>
    <a href="{{ url_for('about_rdab') }}" class="pill-link">ℹ️ Learn more about RDAB</a>
  </section>

  <section class="policies-cta">
    <h3>Need the details?</h3>
    <p>Our full policies explain how we keep RDAB fair, safe, and fun for everyone.</p>
    <a href="{{ url_for('policies_index') }}" class="btn-primary">View Policies</a>
  </section>

  <footer class="landing-footer">
    <p>Raiding Doncaster and Beyond 2025 (c)</p>
    <a href="{{ url_for('policies_index') }}">Tap here to view our policies</a>
    <p class="disclaimer">
      This is a programme run entirely by volunteers from the ‘Raiding Doncaster and Beyond’ Campfire group and is in no way affiliated with
      The Pokémon Company or Niantic. All competitions, giveaways, prize draws, passports and prize redemption are entirely free and there are no monetary gains.
      For support, please contact the RDAB admin team via the Niantic Campfire app.
    </p>
  </footer>
</div>

<style>
.landing-shell{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:24px;
  padding-bottom:20px;
  color:#0f172a;
  width:min(100%,960px);
  margin:0 auto;
}

.hero{
  position:relative;
  overflow:hidden;
  border-radius:22px;
  padding:40px 28px;
  background:radial-gradient(circle at 0% 0%, rgba(94,184,255,0.25), transparent 55%),
             radial-gradient(circle at 100% 0%, rgba(104,226,186,0.25), transparent 55%),
             linear-gradient(135deg, #0f172a, #1d4ed8);
  color:#f8fafc;
  box-shadow:0 18px 50px rgba(15,23,42,0.35);
}

.hero-glow{
  position:absolute;
  inset:-60% -20% auto;
  height:300px;
  background:radial-gradient(circle, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0) 60%);
  filter:blur(0px);
  animation:pulse 7s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{transform:translateY(0);opacity:0.9;}
  50%{transform:translateY(20px);opacity:0.6;}
}

.hero-content{position:relative;z-index:1;max-width:520px;display:flex;flex-direction:column;gap:16px;}
.hero-content h1{margin:0;font-size:2.1rem;line-height:1.15;font-weight:700;color:#e2e8f0;}
.hero-content p{margin:0;font-size:1rem;line-height:1.6;color:#cbd5f5;}
.eyebrow{text-transform:uppercase;letter-spacing:0.28em;font-size:0.75rem;font-weight:600;color:rgba(226,232,240,0.8);}

.hero-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px;}
.btn-primary,.btn-secondary{
  display:inline-flex;align-items:center;justify-content:center;
  padding:10px 18px;border-radius:999px;font-weight:600;text-decoration:none;transition:transform .25s ease, box-shadow .25s ease;
}
.btn-primary{background:#38bdf8;color:#0f172a;box-shadow:0 10px 30px rgba(56,189,248,0.35);}
.btn-primary--large{padding:12px 26px;font-size:1.05rem;}
.btn-secondary{background:rgba(15,23,42,0.25);color:#e2e8f0;border:1px solid rgba(226,232,240,0.35);font-weight:500;}
.btn-secondary--compact{padding:8px 16px;font-size:0.92rem;}
.btn-primary:hover,.btn-secondary:hover{transform:translateY(-2px);box-shadow:0 14px 30px rgba(15,23,42,0.25);} 

.about-card{
  background:rgba(255,255,255,0.82);
  backdrop-filter:blur(18px);
  border-radius:20px;
  padding:24px;
  box-shadow:0 12px 30px rgba(15,23,42,0.15);
  text-align:left;
}
.about-card h2{margin-top:0;font-size:1.4rem;}
.about-card p{margin:12px 0 18px;color:#1e293b;line-height:1.6;}
.pill-link{display:inline-block;padding:8px 14px;border-radius:999px;background:#1d4ed8;color:#fff;text-decoration:none;font-weight:600;box-shadow:0 8px 20px rgba(29,78,216,0.25);} 

.policies-cta{
  background:linear-gradient(135deg,#f1f5f9,#e0f2fe);
  border-radius:18px;
  padding:18px 20px;
  text-align:center;
  box-shadow:0 10px 24px rgba(15,23,42,0.12);
}
.policies-cta h3{margin:0 0 6px;font-size:1.2rem;color:#0f172a;}
.policies-cta p{margin:0 0 14px;color:#334155;}

.landing-footer{text-align:center;padding:16px 10px;margin-top:10px;font-size:0.9rem;color:#1f2937;display:flex;flex-direction:column;gap:10px;}
.landing-footer a{text-decoration:none;color:#1d4ed8;font-weight:600;}
.landing-footer .disclaimer{
  margin:0;
  font-size:0.78rem;
  color:#475569;
  line-height:1.6;
}

@media (max-width:540px){
  .hero{padding:32px 22px;}
  .hero-content h1{font-size:1.75rem;}
  .hero-actions{flex-direction:column;align-items:flex-start;}
  .about-card{padding:20px;}
}

.install-guide{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(15,23,42,0.55);backdrop-filter:blur(6px);z-index:4000;padding:20px;}
.install-guide.is-open{display:flex;}
.install-card{position:relative;background:#0f172a;color:#f8fafc;border-radius:20px;box-shadow:0 30px 60px rgba(15,23,42,0.45);padding:24px 26px;max-width:420px;width:100%;display:flex;flex-direction:column;gap:18px;}
.install-card h2{margin:0;font-size:1.5rem;text-align:center;}
.install-body{display:flex;flex-direction:column;gap:18px;}
.install-step{background:rgba(15,23,42,0.35);border-radius:16px;padding:16px;border:1px solid rgba(148,163,184,0.25);}
.install-step h3{margin:0 0 10px;font-size:1.05rem;color:#38bdf8;text-align:left;}
.install-step ol{margin:0;padding-left:20px;display:flex;flex-direction:column;gap:6px;font-size:0.95rem;}
.install-step li{line-height:1.5;}
.install-step .icon{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;margin-right:4px;}
.install-note{text-align:center;font-size:0.85rem;color:#cbd5f5;margin:0;}
.close-guide{position:absolute;top:12px;right:14px;background:transparent;border:none;color:#f8fafc;font-size:1.6rem;cursor:pointer;}

@media(max-width:440px){
  .install-card{padding:20px;}
}
</style>

<script>
(function(){
  const installBtn=document.getElementById('installBtn');
  const guide=document.getElementById('installGuide');
  const closeBtn=document.getElementById('closeInstall');
  const iosBlock=document.getElementById('installIOS');
  const androidBlock=document.getElementById('installAndroid');
  if(!installBtn || !guide) return;

  function closeGuide(){ guide.classList.remove('is-open'); }

  function detectPlatform(){
    const ua=navigator.userAgent.toLowerCase();
    const isIOS=(/iphone|ipad|ipod/.test(ua));
    const isAndroid=/android/.test(ua);
    const showIOS=isIOS || (!isIOS && !isAndroid);
    const showAndroid=isAndroid || (!isIOS && !isAndroid);
    if(iosBlock){
      iosBlock.hidden=!showIOS;
    }
    if(androidBlock){
      androidBlock.hidden=!showAndroid;
    }
  }

  installBtn.addEventListener('click',()=>{
    detectPlatform();
    guide.classList.add('is-open');
  });
  closeBtn?.addEventListener('click',closeGuide);
  guide.addEventListener('click',e=>{
    if(e.target===guide){closeGuide();}
  });
})();
</script>

{% endblock %}
