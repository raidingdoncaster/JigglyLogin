{% extends "live_events/base.html" %}

{% block content %}
  {% set map_data = content.get("map") or {} %}
  <section>
    {% set banner = map_data.get("banner") %}
    {% if banner and banner.image %}
      <div class="banner">
        <img src="{{ url_for('static', filename=banner.image) }}" alt="{{ banner.alt or '' }}">
      </div>
    {% endif %}

    <h1>{{ map_data.heading or "Map & logistics" }}</h1>
    {% if map_data.body %}
      <p class="lead">{{ map_data.body }}</p>
    {% endif %}

    {% if map_data.notes %}
      <ul class="note-list">
        {% for note in map_data.notes %}
          <li>{{ note }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    {% set locations = map_data.get("locations") or [] %}
    {% if locations %}
      <div class="map-actions">
        {% for location in locations if location.image %}
          <button
            type="button"
            class="map-button"
            data-map-trigger
            data-map-label="{{ location.label }}"
            data-map-description="{{ location.description or '' }}"
            data-map-image="{{ url_for('static', filename=location.image) }}"
            data-map-alt="{{ location.alt or location.label }}"
          >
            <span>{{ location.label or "View map" }}</span>
            {% if location.description %}
              <small>{{ location.description }}</small>
            {% endif %}
          </button>
        {% endfor %}
      </div>
    {% endif %}
  </section>
{% endblock %}
