<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>{{ (page_meta.title if page_meta and page_meta.title else "Community Celebrations Live") }}</title>
  {% if page_meta and page_meta.description %}
  <meta name="description" content="{{ page_meta.description }}">
  {% endif %}
  <meta name="theme-color" content="#ffe6f0">
  {% if canonical_url %}
  <link rel="canonical" href="{{ canonical_url }}">
  {% endif %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --shell-width:min(1120px,94vw);
      --bg-primary:#fff7f0;
      --bg-secondary:#fefcff;
      --bg-surface:#ffffff;
      --text-primary:#2a1f2d;
      --text-secondary:rgba(42,31,45,0.7);
      --accent-peach:#ff9fb2;
      --accent-sun:#ffd972;
      --accent-mint:#8be8cb;
      --accent-lilac:#c8adff;
      --radius-lg:28px;
      --radius-md:20px;
      --radius-sm:14px;
      --shadow-soft:0 24px 48px rgba(202,143,255,0.18);
    }
    *,*::before,*::after{box-sizing:border-box;}
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:linear-gradient(155deg,#fff7f0 0%,#ffeef8 42%,#f7f0ff 100%);
      color:var(--text-primary);
      min-height:100vh;
      padding:0;
      line-height:1.6;
      position:relative;
      overflow-x:hidden;
    }
    .confetti-layer{
      position:fixed;
      inset:-12vh -12vw;
      pointer-events:none;
      opacity:0.55;
      background-size:16px 16px, 20px 20px, 14px 14px;
      z-index:1;
      animation:confetti-drift 22s linear infinite;
    }
    .confetti-layer::before,
    .confetti-layer::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background-repeat:repeat;
    }
    .confetti-layer::before{
      background-image:
        radial-gradient(circle at 20% 20%, rgba(255,159,178,0.65) 18%, transparent 20%),
        radial-gradient(circle at 70% 40%, rgba(194,158,255,0.65) 18%, transparent 22%),
        radial-gradient(circle at 40% 80%, rgba(255,217,114,0.6) 18%, transparent 20%);
      background-size:140px 140px, 220px 220px, 180px 180px;
      animation:confetti-sway 28s ease-in-out infinite alternate;
    }
    .confetti-layer::after{
      background-image:
        radial-gradient(circle at 12% 40%, rgba(139,232,203,0.55) 14%, transparent 18%),
        radial-gradient(circle at 88% 60%, rgba(255,204,229,0.6) 16%, transparent 18%),
        radial-gradient(circle at 36% 12%, rgba(255,203,112,0.55) 12%, transparent 16%);
      background-size:180px 180px, 200px 200px, 160px 160px;
      animation:confetti-sway 32s ease-in-out infinite alternate-reverse;
    }
    @keyframes confetti-drift{
      0%{transform:translate3d(0,0,0) rotate(0deg);}
      50%{transform:translate3d(-2vw,1.5vh,0) rotate(0.6deg);}
      100%{transform:translate3d(2vw,-2vh,0) rotate(-0.6deg);}
    }
    @keyframes confetti-sway{
      0%{transform:translate3d(0,0,0) scale(1);}
      100%{transform:translate3d(-16px,-14px,0) scale(1.06);}
    }
    main{
      width:100%;
      position:relative;
      z-index:2;
      padding:clamp(36px,5vw,64px) 0 160px;
    }
    .page-shell{
      width:var(--shell-width);
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:clamp(46px,7vw,72px);
    }
    section{
      background:rgba(255,255,255,0.85);
      backdrop-filter:blur(18px);
      border-radius:var(--radius-lg);
      padding:clamp(32px,6vw,48px);
      box-shadow:var(--shadow-soft);
      position:relative;
      overflow:hidden;
    }
    section::before{
      content:\"\"; position:absolute; inset:16px;
      border-radius:calc(var(--radius-lg) - 12px);
      border:1px dashed rgba(255,182,193,0.28);
      pointer-events:none;
    }
    .banner{
      border-radius:var(--radius-md);
      overflow:hidden;
      margin-bottom:24px;
      box-shadow:0 18px 32px rgba(200,173,255,0.18);
    }
    .banner img{ width:100%; display:block; }
    .welcome-card{
      background:linear-gradient(135deg,rgba(255,255,255,0.92),rgba(255,255,255,0.76));
      border-radius:var(--radius-md);
      padding:clamp(24px,4vw,32px);
      box-shadow:0 18px 36px rgba(180,152,255,0.18);
      position:relative;
      overflow:hidden;
    }
    .welcome-card::after{
      content:\"\"; position:absolute; inset:0;
      background:radial-gradient(circle at 12% 16%, rgba(255,217,114,0.4), transparent 60%);
      pointer-events:none;
    }
    .welcome-card__image{
      margin-top:28px;
      border-radius:20px;
      overflow:hidden;
      box-shadow:0 20px 40px rgba(58,141,222,0.18);
    }
    .welcome-card__image img{ width:100%; display:block; }
    .agenda-grid{
      margin-top:32px;
      display:grid;
      gap:18px;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    }
    .agenda-card{
      background:rgba(255,255,255,0.92);
      border-radius:var(--radius-md);
      padding:18px 20px;
      box-shadow:0 16px 30px rgba(200,173,255,0.16);
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .agenda-card__image{
      border-radius:14px;
      overflow:hidden;
      box-shadow:0 14px 28px rgba(180,152,255,0.18);
    }
    .agenda-card__image img{ width:100%; display:block; }
    .agenda-card__time{
      font-weight:600;
      letter-spacing:0.08em;
      font-size:0.85rem;
      text-transform:uppercase;
      color:#5a2a63;
    }
    .agenda-card__title{
      font-size:1.1rem;
      font-weight:600;
    }
    .agenda-card__body{
      color:var(--text-secondary);
      flex:1;
      font-size:0.95rem;
    }
    .agenda-card__cta{
      align-self:flex-start;
      margin-top:8px;
    }
    .route-tours{
      margin-top:36px;
      display:grid;
      gap:24px;
    }
    .tour-grid{
      display:grid;
      gap:18px;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    }
    .tour-column{
      display:grid;
      gap:12px;
    }
    .tour-slot{
      background:rgba(255,255,255,0.95);
      border-radius:14px;
      padding:12px 16px;
      font-weight:600;
      text-align:center;
      box-shadow:0 12px 26px rgba(200,173,255,0.16);
    }
    .story-brief{
      display:grid;
      gap:24px;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      align-items:start;
    }
    .mission-card{
      margin-top:28px;
      padding:24px 22px;
      border-radius:var(--radius-md);
      background:rgba(255,255,255,0.92);
      box-shadow:0 18px 34px rgba(200,173,255,0.2);
    }
    .rewards-grid{
      margin-top:24px;
      display:grid;
      gap:18px;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    }
    .reward-card{
      background:rgba(255,255,255,0.95);
      border-radius:var(--radius-md);
      padding:20px;
      box-shadow:0 16px 30px rgba(200,173,255,0.18);
      display:grid;
      gap:14px;
    }
    .reward-card img{
      width:100%;
      border-radius:12px;
      box-shadow:0 14px 26px rgba(160,132,255,0.18);
    }
    .reward-card small{
      font-size:0.85rem;
      color:var(--text-secondary);
    }
    .prize-showcase{
      margin-top:28px;
      text-align:center;
    }
    .prize-showcase img{
      width:100%;
      border-radius:18px;
      box-shadow:0 22px 42px rgba(200,173,255,0.2);
    }
    .tile-grid{
      margin-top:28px;
      display:grid;
      gap:16px;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
    }
    .tile{
      background:rgba(255,255,255,0.95);
      border-radius:18px;
      padding:12px;
      text-decoration:none;
      color:var(--text-primary);
      display:grid;
      gap:12px;
      justify-items:center;
      box-shadow:0 14px 28px rgba(200,173,255,0.18);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .tile:hover{
      transform:translateY(-2px);
      box-shadow:0 20px 38px rgba(200,173,255,0.26);
    }
    .tile img{
      width:100%;
      border-radius:14px;
    }
    .note-list{
      margin-top:20px;
      padding-left:18px;
      color:var(--text-secondary);
    }
    .links-list{
      display:grid;
      gap:12px;
      margin-top:24px;
    }
    .links-list a{
      padding:12px 16px;
      border-radius:14px;
      background:rgba(255,255,255,0.95);
      color:var(--text-primary);
      text-decoration:none;
      box-shadow:0 12px 24px rgba(200,173,255,0.16);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .links-list a:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 28px rgba(200,173,255,0.24);
    }
    h1,h2,h3{
      font-family:'Fredoka',cursive;
      margin:0;
      color:var(--text-primary);
      letter-spacing:0.01em;
    }
    h1{
      font-size:clamp(2.4rem,5vw,3.2rem);
      line-height:1.1;
    }
    h2{
      font-size:clamp(1.8rem,4vw,2.4rem);
      line-height:1.16;
    }
    .eyebrow{
      font-size:0.85rem;
      text-transform:uppercase;
      letter-spacing:0.28em;
      font-weight:600;
      color:rgba(42,31,45,0.55);
    }
    p.lead{
      font-size:clamp(1.05rem,2.3vw,1.25rem);
      max-width:620px;
      color:var(--text-secondary);
      margin:18px 0 0;
    }
    .button-row{
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      margin-top:26px;
    }
    .button{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:14px 24px;
      border-radius:999px;
      font-weight:600;
      text-decoration:none;
      letter-spacing:0.05em;
      transition:transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;
    }
    .button--inline{
      padding:10px 18px;
      font-size:0.9rem;
    }
    .button--primary{
      background:linear-gradient(135deg,var(--accent-peach),var(--accent-lilac));
      color:#3a1145;
      box-shadow:0 16px 36px rgba(255,159,178,0.35);
    }
    .button--primary:hover{
      transform:translateY(-2px);
      box-shadow:0 22px 46px rgba(255,159,178,0.45);
    }
    .button--secondary{
      background:rgba(255,255,255,0.85);
      border:2px solid rgba(58,17,69,0.12);
      color:var(--text-primary);
    }
    .button--secondary:hover{
      background:rgba(255,255,255,1);
      transform:translateY(-2px);
      box-shadow:0 16px 32px rgba(200,173,255,0.28);
    }
    .stat-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:18px;
      margin-top:36px;
    }
    .stat-card{
      background:var(--bg-secondary);
      border-radius:var(--radius-md);
      padding:22px 20px;
      text-align:center;
      box-shadow:0 18px 34px rgba(255,190,210,0.22);
      border:1px solid rgba(255,255,255,0.6);
    }
    .stat-card strong{
      display:block;
      font-size:2rem;
      font-family:'Fredoka',cursive;
      letter-spacing:0.03em;
    }
    .stat-card span{
      display:block;
      margin-top:6px;
      font-size:0.95rem;
      color:var(--text-secondary);
    }
    .highlight-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:22px;
      margin-top:32px;
    }
    .highlight-card{
      --card-accent:var(--accent-peach);
      background:linear-gradient(145deg,rgba(255,255,255,0.94),rgba(255,255,255,0.75));
      border-radius:var(--radius-md);
      padding:26px 24px;
      position:relative;
      overflow:hidden;
      box-shadow:0 18px 38px rgba(200,173,255,0.18);
    }
    .highlight-card::after{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at 12% 18%, var(--card-accent) 0%, rgba(255,255,255,0) 65%);
      opacity:0.6;
      pointer-events:none;
    }
    .highlight-card h3{
      position:relative;
      z-index:1;
      font-size:1.3rem;
      margin-bottom:12px;
    }
    .highlight-card p{
      position:relative;
      z-index:1;
      margin:0;
      color:var(--text-secondary);
    }
    .timeline{
      display:grid;
      gap:22px;
      margin-top:34px;
    }
    .timeline-item{
      display:grid;
      gap:16px;
      background:var(--bg-surface);
      border-radius:var(--radius-md);
      padding:22px 24px;
      border:1px solid rgba(58,17,69,0.08);
      box-shadow:0 16px 28px rgba(255,181,218,0.2);
    }
    .timeline-item-header{
      display:flex;
      flex-wrap:wrap;
      gap:12px 18px;
      align-items:center;
    }
    .timeline-stamp{
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.18em;
      font-size:0.72rem;
      background:rgba(255,159,178,0.16);
      color:#b02a56;
      padding:6px 12px;
      border-radius:999px;
    }
    .timeline-title{
      font-size:1.25rem;
      font-weight:600;
    }
    .timeline-details{
      margin:0;
      color:var(--text-secondary);
    }
    .callout-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(210px,1fr));
      gap:20px;
      margin-top:28px;
    }
    .callout-card{
      background:rgba(255,255,255,0.9);
      border-radius:var(--radius-md);
      padding:22px 24px;
      box-shadow:0 16px 30px rgba(255,205,228,0.2);
      border:1px solid rgba(255,255,255,0.74);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .callout-icon{
      font-size:1.6rem;
    }
    .callout-card h3{
      font-size:1.2rem;
    }
    .faq-group{
      display:grid;
      gap:18px;
      margin-top:28px;
    }
    details.faq-item{
      background:rgba(255,255,255,0.96);
      border-radius:var(--radius-md);
      padding:18px 22px;
      border:1px solid rgba(42,31,45,0.08);
      box-shadow:0 14px 28px rgba(200,173,255,0.16);
    }
    details.faq-item summary{
      list-style:none;
      cursor:pointer;
      font-weight:600;
      font-size:1.05rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    details.faq-item summary::after{
      content:"+";
      font-size:1.4rem;
      transition:transform 0.25s ease;
    }
    details.faq-item[open] summary::after{
      transform:rotate(45deg);
    }
    details.faq-item p{
      margin:14px 0 0;
      color:var(--text-secondary);
    }
    footer{
      margin-top:52px;
      text-align:center;
      color:rgba(42,31,45,0.5);
      font-size:0.85rem;
    }
    .bottom-nav{
      position:fixed;
      left:50%;
      bottom:24px;
      transform:translateX(-50%);
      width:min(460px,88vw);
      background:rgba(255,255,255,0.96);
      border-radius:999px;
      box-shadow:0 20px 38px rgba(58,141,222,0.18);
      display:grid;
      grid-template-columns:repeat(4,1fr);
      padding:10px;
      gap:6px;
      z-index:5;
      backdrop-filter:blur(16px);
    }
    .bottom-nav__item{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:4px;
      padding:10px 8px;
      border-radius:999px;
      text-decoration:none;
      color:#5a2a63;
      font-size:0.85rem;
      font-weight:600;
      transition:background .2s ease, color .2s ease;
    }
    .bottom-nav__item span{
      font-size:1.2rem;
    }
    .bottom-nav__item.is-active{
      background:linear-gradient(135deg,rgba(255,159,178,0.26),rgba(200,173,255,0.26));
      color:#3a1145;
    }
    .bottom-nav__item:is(:hover,:focus){
      background:rgba(255,255,255,0.7);
    }
    @media (max-width:720px){
      section{
        padding:28px 26px;
      }
      section::before{
        inset:12px;
      }
      .button-row{
        flex-direction:column;
        align-items:stretch;
      }
      .timeline-item{
        padding:20px 18px;
      }
      .bottom-nav{
        bottom:18px;
        padding:8px;
      }
      .bottom-nav__item{
        font-size:0.75rem;
      }
    }
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body>
  <div class="confetti-layer"></div>
  <main>
    <div class="page-shell">
      {% block content %}{% endblock %}
      <footer>
        Crafted with colour and care by the RDAB celebrations team.
      </footer>
    </div>
    {% if navigation %}
      <nav class="bottom-nav" aria-label="Live events sections">
        {% for item in navigation %}
          {% set item_view = item.view or item.get('view') %}
          {% set is_active = item_view == active_view %}
          <a
            class="bottom-nav__item{{ ' is-active' if is_active else '' }}"
            href="{{ url_for('live_events_page', view=item_view) }}"
          >
            <span>{{ item.icon or '' }}</span>
            {{ item.label or item_view|title }}
          </a>
        {% endfor %}
      </nav>
    {% endif %}
  </main>
</body>
</html>
