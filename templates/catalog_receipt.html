{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-cozy' %}
{% endblock %}

{% block content %}

<div class="item-card-detail">
  <!-- Header -->
  <div class="receipt-header">
    <h1>üßæ Order Receipt</h1>
    <div class="status {{ rec.status|lower }}">{{ rec.status }}</div>
  </div>

  <!-- Item Section -->
  <div class="item-thumb" style="background-image:url('{{ rec.item_snapshot.image_url or url_for('static', filename='icons/catalog-app.png') }}')">
    <div class="cost-badge">
      <img src="{{ url_for('static', filename='passport/stamper.png') }}" alt="Cost">
      <span>{{ rec.stamps_spent }}</span>
    </div>
  </div>

  <div class="item-meta">
    <h2>{{ rec.item_snapshot.name }}</h2>
  </div>

  <!-- Pickup Section -->
  <div class="section">
    <h3>üóìÔ∏è Pick-up</h3>
    <p><strong>Meet-up:</strong> {{ rec.metadata.meetup.name }}</p>
    <p><strong>Location:</strong> {{ rec.metadata.meetup.location }}</p>
    <p><strong>When:</strong> {{ rec.metadata.meetup.date|to_date }} @ {{ rec.metadata.meetup.start_time }}</p>
  </div>

  <!-- Trainer Info -->
  <div class="section">
    <h3>üë§ Trainer</h3>
    <p><strong>Username:</strong> {{ rec.trainer_username }}</p>
    <p><strong>Placed:</strong> {{ rec.created_at|to_date }}</p>
    <p><strong>Redemption ID:</strong> <code>{{ rec.id }}</code></p>
  </div>

  <!-- Footer Actions -->
  <div class="item-actions">
    <a href="{{ url_for('catalog') }}" class="back-btn">‚¨Ö Back to Catalog</a>
  </div>
</div>

<style>
.item-card-detail {background:#fff;border-radius:18px;padding:22px;box-shadow:0 12px 28px rgba(15,23,42,0.14);display:flex;flex-direction:column;gap:18px;}
.receipt-header {display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;}
.status {font-size:.85em;padding:4px 12px;border-radius:999px;font-weight:600;}
.status.pending {background:#fff7ed;color:#9a3412;}
.status.fulfilled {background:#e8f7ef;color:#065f46;}
.status.cancelled {background:#fee2e2;color:#991b1b;}
.item-thumb {position:relative;width:100%;height:200px;border-radius:18px;background:#eef3f8 center/cover no-repeat;}
.cost-badge {position:absolute;top:8px;left:8px;display:flex;align-items:center;gap:6px;background:rgba(255,255,255,.9);padding:2px 6px;border-radius:12px;font-weight:bold;}
.cost-badge img {width:24px;height:24px;}
.section {border-top:1px dashed #dde3f3;padding-top:14px;color:#334155;text-align:left;}
.section h3{margin:0 0 8px;font-size:1em;color:#1d4ed8;}
.section p{margin:4px 0;}
.back-btn {background:#eef2ff;color:#1d4ed8;padding:10px 18px;border-radius:999px;text-decoration:none;font-weight:600;display:inline-flex;align-items:center;gap:6px;box-shadow:0 8px 20px rgba(29,78,216,0.18);}
</style>

{% endblock %}
