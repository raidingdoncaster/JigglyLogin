{% extends "base.html" %}
{% block content %}
<div class="auth-shell">
  <section class="auth-hero">
    <div class="hero-glow"></div>
    <div class="hero-text">
      <span class="hero-eyebrow">Raiding Doncaster and Beyond</span>
      <h1>Where local Trainers level up together.</h1>
      <p>Share your trainer profile once, set a secure PIN, and you’re ready to earn RDAB passport stamps.</p>
    </div>
    <div class="hero-media">
      <img src="{{ url_for('static', filename='banner.jpg') }}" alt="RDAB community" class="hero-banner">
    </div>
  </section>

  <section class="auth-card">
    <h2>Set up your RDAB passport</h2>

    <div class="signup-guide">
      <img src="{{ url_for('static', filename='example_profile.png') }}" alt="Example Trainer Profile" class="signup-guide__image">
      <div class="signup-guide__copy">
        <p>Upload a screenshot of your <strong>Trainer Profile</strong> in Pokémon GO, making sure your trainer name is clearly visible.</p>
        <p>Choose a unique <strong>4-digit PIN</strong> and a <strong>memorable password</strong>. Only use a memorable password for RDAB—never reuse one from another account.</p>
      </div>
    </div>

    <form action="{{ url_for('signup') }}" method="post" enctype="multipart/form-data" class="auth-form">
      <label class="auth-label" for="profile_screenshot">Upload profile screenshot</label>
      <input id="profile_screenshot" class="auth-input" type="file" name="profile_screenshot" accept="image/*" required>

      <label class="auth-label" for="signup-pin">Choose a 4-digit PIN</label>
      <div class="auth-input-row">
        <input id="signup-pin" class="auth-input" type="password" name="pin" pattern="\d{4}" maxlength="4" placeholder="1234" required>
        <button type="button" class="auth-btn auth-btn--outline" onclick="togglePin('signup-pin', this)">Show</button>
      </div>

      <label class="auth-label" for="memorable">Memorable password (for recovery)</label>
      <input id="memorable" class="auth-input" type="text" name="memorable" placeholder="e.g. Pikachu" required>

      <button type="submit" class="auth-btn auth-btn--primary auth-btn--full">Create my account</button>
    </form>

    <div class="auth-tip">
      ⚠️ If detection doesn’t work, try again with a clear screenshot showing your trainer name. If issues continue, contact a community admin.
    </div>

    <div class="auth-links">
      <a href="{{ url_for('login') }}" class="auth-btn auth-btn--ghost">⬅ Back to login</a>
    </div>
  </section>

  <section class="policy-cta">
    <h3>Need the details?</h3>
    <p>Review our community policies, safeguarding approach, and data promises before you join.</p>
    <a href="{{ url_for('policies_index') }}?pwa=1&amp;source=login" class="auth-btn auth-btn--primary">View policies</a>
  </section>
</div>
{% endblock %}
