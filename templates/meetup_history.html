{% extends "base.html" %}
{% block content %}
<div class="meetup-history-container">

  <!-- Header -->
  <h2 style="text-align:center;margin-bottom:15px;">ðŸ“… Meet-up History</h2>

  <!-- Summary Counter -->
  <div class="summary-box">
    <h3>{{ total_attended }}</h3>
    <p>Total Meet-ups</p>
  </div>

  <!-- Sort dropdown -->
  <form method="get" class="sort-form">
    <label for="sort">Sort by:</label>
    <select name="sort" id="sort" onchange="this.form.submit()">
      <option value="date_desc" {% if sort_by=='date_desc' %}selected{% endif %}>Newest First</option>
      <option value="date_asc" {% if sort_by=='date_asc' %}selected{% endif %}>Oldest First</option>
      <option value="title" {% if sort_by=='title' %}selected{% endif %}>Alphabetical</option>
    </select>
  </form>

  <!-- Event Rows -->
  <div style="margin-top:20px;">
    {% if meetups %}
      <ul style="list-style:none;padding:0;margin:0;">
        {% for m in meetups %}
          <li style="display:flex;align-items:center;gap:12px;background:#fff;padding:10px 15px;margin-bottom:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            {% if m.photo %}
              <img src="{{ m.photo }}" alt="Event Photo" style="width:50px;height:50px;object-fit:cover;border-radius:6px;">
            {% else %}
              <div style="width:50px;height:50px;background:#eee;border-radius:6px;"></div>
            {% endif %}
            <div style="flex:1;">
              <strong>{{ m.title }}</strong><br>
              <small style="color:#666;">{{ m.date }}</small>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p style="text-align:center;color:#777;">No meet-ups found yet.</p>
    {% endif %}
  </div>
</div>

<style>
.meetup-history-container {
  margin: 0 auto;
  max-width: 900px;
}
.summary-box {
  background:#fff;
  padding:15px;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  text-align:center;
  margin:0 auto 20px;
  width:200px;
}
.summary-box h3 {
  margin:0;
  color:#3a8dde;
  font-size:1.6em;
}
.summary-box p {
  margin:0;
  color:#777;
  font-size:0.9em;
}
.sort-form {
  margin-bottom:15px;
  text-align:center;
}
.sort-form label {
  font-weight:bold;
  margin-right:6px;
}
.meetup-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:15px;
}
.meetup-card {
  background:#fff;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  overflow:hidden;
  transition:transform 0.2s ease;
}
.meetup-card:hover {
  transform:translateY(-3px);
}
.meetup-photo {
  width:100%;
  height:140px;
  object-fit:cover;
}
.meetup-info {
  padding:10px;
}
.meetup-info h3 {
  margin:0;
  font-size:1.05em;
  color:#333;
}
.meetup-info p {
  margin:4px 0 0;
  color:#555;
  font-size:0.9em;
}
</style>
{% endblock %}