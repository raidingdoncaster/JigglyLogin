{% extends "base.html" %}
{% block content %}
<h2>ðŸ“… Meetup History</h2>

<!-- Summary Counter -->
<div style="display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap;">
  <div style="flex:1;min-width:150px;background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.15);text-align:center;">
    <h3 style="margin:0;color:#333;">{{ total_attended }}</h3>
    <p style="margin:0;color:#777;">Total Meet-ups</p>
  </div>
</div>

<!-- Sort dropdown -->
<form method="get" style="margin-bottom:15px;">
  <label for="sort">Sort by:</label>
  <select name="sort" id="sort" onchange="this.form.submit()">
    <option value="date_desc" {% if sort_by=='date_desc' %}selected{% endif %}>Newest First</option>
    <option value="date_asc" {% if sort_by=='date_asc' %}selected{% endif %}>Oldest First</option>
    <option value="title" {% if sort_by=='title' %}selected{% endif %}>Alphabetical</option>
  </select>
</form>

<!-- Event Cards -->
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;">
  {% for m in meetups %}
    <div style="background:#fff;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.15);overflow:hidden;">
      {% if m.photo %}
        <img src="{{ m.photo }}" alt="Event Photo" style="width:100%;height:140px;object-fit:cover;">
      {% endif %}
      <div style="padding:10px;">
        <h3 style="margin:0;font-size:1.1em;">{{ m.title }}</h3>
        <p style="margin:4px 0;color:#555;">{{ m.date }}</p>
      </div>
    </div>
  {% endfor %}
</div>

{% endblock %}