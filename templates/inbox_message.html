{% extends "base.html" %}

{% block page_settings %}
  {% set container_class = 'is-cozy' %}
{% endblock %}

{% block content %}

<h1>ðŸ“© Message</h1>

<div class="msg-card">
  <div class="head">
    <div class="left">
      <div class="subject">{{ msg.subject }}</div>
      <div class="meta">
        {% if msg.type %}<span class="type-pill">{{ msg.type }}</span>{% endif %}
        <span class="date">{{ msg.sent_at|to_date }}</span>
        {% if msg.audience and msg.audience != 'ALL' %}
          <span class="aud">To: {{ msg.audience }}</span>
        {% endif %}
      </div>
    </div>
    <div class="right">
      <a class="btn secondary" href="{{ url_for('inbox') }}">â¬… Back to Inbox</a>
    </div>
  </div>

  <div class="body">
    <p>{{ msg.message|nl2br }}</p>

    {% if msg.metadata and msg.metadata.url %}
    <div class="cta">
      <a class="btn primary" href="{{ msg.metadata.url }}">View receipt</a>
    </div>
    {% endif %}
  </div>
</div>

<style>
.msg-card { background:#fff; border-radius:18px; padding:22px; box-shadow:0 12px 28px rgba(15,23,42,0.14); display:flex; flex-direction:column; gap:16px; }
.head { display:flex; justify-content:space-between; gap:12px; align-items:flex-start; flex-wrap:wrap; }
.subject { font-weight:800; font-size:1.2em; color:#1f2937; }
.meta { margin-top:4px; display:flex; gap:8px; align-items:center; color:#475569; font-size:.9em; flex-wrap:wrap; }
.type-pill { font-size:.75em; padding:2px 10px; border-radius:999px; background:#eef2ff; color:#334155; text-transform:uppercase; font-weight:700; }
.body { color:#1f2937; line-height:1.6; }
.body p{margin:0;}
.cta { margin-top:16px; }
.btn { text-decoration:none; padding:10px 18px; border-radius:999px; font-weight:700; display:inline-flex; align-items:center; gap:6px; }
.btn.primary { background:#3a8dde; color:#fff; box-shadow:0 8px 20px rgba(58,141,222,0.25); }
.btn.secondary { background:#eef2ff; color:#3a8dde; }
.aud { background:#f4f4f5; padding:2px 8px; border-radius:999px; font-size:.8em; font-weight:600; }
</style>

{% endblock %}
