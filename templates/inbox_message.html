{% extends "base.html" %}
{% block content %}

<h1>ðŸ“© Message</h1>

<div class="msg-card">
  <div class="head">
    <div class="left">
      <div class="subject">{{ msg.subject }}</div>
      <div class="meta">
        {% if msg.type %}<span class="type-pill">{{ msg.type }}</span>{% endif %}
        <span class="date">{{ msg.sent_at|to_date }}</span>
        {% if msg.audience and msg.audience != 'ALL' %}
          <span class="aud">To: {{ msg.audience }}</span>
        {% endif %}
      </div>
    </div>
    <div class="right">
      <a class="btn secondary" href="{{ url_for('inbox') }}">â¬… Back to Inbox</a>
    </div>
  </div>

  <div class="body">
    <p>{{ msg.message|nl2br }}</p>

    {% if msg.metadata and msg.metadata.url %}
    <div class="cta">
      <a class="btn primary" href="{{ msg.metadata.url }}">View receipt</a>
    </div>
    {% endif %}
  </div>
</div>

<style>
.msg-card { background:#fff; border-radius:12px; padding:14px; box-shadow:0 2px 10px rgba(0,0,0,.08); }
.head { display:flex; justify-content:space-between; gap:10px; align-items:flex-start; }
.subject { font-weight:800; font-size:1.05em; }
.meta { margin-top:4px; display:flex; gap:8px; align-items:center; color:#666; font-size:.9em; flex-wrap:wrap; }
.type-pill { font-size:.75em; padding:2px 8px; border-radius:999px; background:#eef2ff; color:#334155; text-transform:uppercase; }
.body { margin-top:10px; color:#333; }
.cta { margin-top:12px; }
.btn { text-decoration:none; padding:8px 12px; border-radius:8px; font-weight:700; display:inline-block; }
.btn.primary { background:#3a8dde; color:#fff; }
.btn.secondary { background:#eef2ff; color:#3a8dde; }
.aud { background:#f4f4f5; padding:2px 6px; border-radius:6px; font-size:.85em; }
</style>

{% endblock %}